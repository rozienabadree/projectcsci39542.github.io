<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <title> Uber vs. NYC</title>
    <link rel="stylesheet" type = "text/css" href="style.css">
    <link rel="icon" type="image/png" href="yellow_cab.png">
  </head>
  <body>
    <center>
      <h1>Should Uber be capped in NYC?</h1>
    </center>
    <div class="tab">
      <button class="tablink" onclick="openPage('intro', this)" id="defaultOpen">Introduction & Video</button>
      <button class="tablink" onclick="openPage('analysis', this)">Ridership & Fares</button>
      <button class="tablink" onclick="openPage('code', this)">Codes & Raw Data</button>
      <button class="tablink" onclick="openPage('resources', this)">Resources</button>
    </div>

    <div id="intro" class="tabcontent">
        <br>
        <br>
      <!-- Embed trailer video -->
      <table style="width:100%">
        <h3>TEST VIDEO</h3>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/OkQsuskZLus" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      </table>
        <br>
        <br>
        <h2><strong>Abstract</strong></h2>
        <p>Uber has recently driven the once-solid yellow cab industry into bankruptcy.
          I intend on taking a deep-dive into the available data to analyze and visualize Uber’s rapid increase in rides,
          the yellow cab’s rapid decrease in rides, and compare Uber's and the yellow taxi’s fares/fees.
          </p>
          <br>
          <br>
          <h2>More to come</h2>
      </div>
<!-- page number 2 -->
    <div id="analysis" class="tabcontent">
      <h2>Ridership</h2><br>
        <table style="width:50%" border=2px>
          <tr>
            <th>TESTING</th>
            <th>TESTING</th>
          </tr>
          <tbody>
            <tr>
              <td>TESTING</td>
              <td>TESTING</td>
            </tr>
            <tr>
              <td>TESTING</td>
              <td>TESTING</td>
            </tr>
            <tr>
              <td>TESTING</td>
              <td>TESTING</td>
            </tr>
            <tr>
              <td>TESTING</td>
              <td>TESTING</td>
            </tr>
            <tr>
              <td>TESTING</td>
              <td>TESTING</td>
            </tr>
          </tbody>
        </table>
        <h2>More to come</h2>
    </div>
<!-- page # 3 -->
    <div id="code" class="tabcontent">
      <p>
        <a name = "p1"> Using the </a>
        <a href = "https://github.com/rozienabadree/projectcsci39542.github.io/blob/f0b6026c17d090ba2f385573b43da46ccf0017b6/uber_Data.csv" >uber_Data.csv</a>
           file, Uber had a total of 753,714,454 from 2015 to present date.
      </p>
      <code class="codeblock">
        <br>
        df = pd.read_csv('uber_Data.csv') <br>
        df['Total Dispatched Trips'] = df['Total Dispatched Trips'].str.replace(",","").astype(float) <br>
        total = df['Total Dispatched Trips'].sum() <br>
        print(total) <br>
        <br>
      </code>
      <br>
      <p>
        <a name = "p1"> A second and more comprehensive analysis was done using the </a>
        <a href = "https://github.com/rozienabadree/projectcsci39542.github.io/blob/1539353e2c195af278d8d560b46bfa4278c4e538/FHV_Base_Aggregate_Report.csv" >FHV_Base_Aggregate_Report.csv</a>
           file, which is a tally of all taxi rides in NYC between 2015 and November 2021.
           Data from this file, produced the the first <a href = "https://github.com/rozienabadree/projectcsci39542.github.io/blob/b65dd8a9a8a978bb7f94cd73fbc1985fcce3b557/aggregate_analysis.csv">pivot table</a> and graph below (Uber vs NYC Rides).
      </p>
      <code class="codeblock">
        <br>
        #Read the CSV into a dataframe. <br>
        df = pd.read_csv('FHV_Base_Aggregate_Report.csv') <br><br>

        #Change the case for the `Base Name` column. <br>
        df['Base Name']= df['Base Name'].str.upper().str.title() <br><br>

        #Convert each value in the `Total Dispatched Trips` column to integers. <br>
        df['Total Dispatched Trips'] = df['Total Dispatched Trips'].str.replace(",","").astype(int) <br>
        pivot = pd.pivot_table(df, index = 'Base Name',
                                         columns = 'Year',
                                         values = 'Total Dispatched Trips',
                                         aggfunc = 'sum',
                                         fill_value = 0,
                                         margins = True,
                                         margins_name = 'Total').sort_values('Total',
                                                                             ascending=False) <br><br>

        #Save the data to a CSV file. <br>
        pivot.to_csv('aggregate_analysis.csv') <br><br>

        #Working with the same pivot table, view the top 3 companies against the total # of rides. <br>
        top_cabs = pivot.head(4) <br>
        top_cabs = top_cabs.drop(columns='Total') <br>
        top_cabs = top_cabs.drop('Total') <br>
        print(top_cabs) <br><br>

        #Graph, save, and show the data. <br>
        ax = top_cabs.plot(kind='barh', title='Uber vs NYC Rides\n2015-2021') <br>
        ax.invert_yaxis() <br>
        ax.set(xlabel='# of rides in hundred millions', ylabel='base name') <br>
        fig = plt.gcf() <br>
        fig.savefig('uber.png') <br>
        plt.show() <br><br>
      </code>
      <img src="uber.png" alt="Uber vs NYC Rides 2015-2021">


      <h2>More to come...</h2>
    </div>
<!-- My resources page -->
    <div id="resources" class="tabcontent">
      <h3>Resources</h3>
      <p>Thank you to NYC Open Data for their content.</p>
    </div>


    <script> function openPage(pageName, elmnt) {
      // Hide all elements with class="tabcontent" by default
      var i, tabcontent, tablinks;
      tabcontent = document.getElementsByClassName("tabcontent");
      for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
      }
      // Show the specific tab content
      document.getElementById(pageName).style.display = "block";
      }
      // Get the element with id="defaultOpen" and click on it
      document.getElementById("defaultOpen").click();
    </script>
  </body>
</html>
